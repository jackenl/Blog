# 计算机网络知识总结

## OSI 七层模型

OSI 七层模型：应用层、表示层、会话层、传输层、网络层、数据链路层、物理层

常见网络协议：

- 应用层：HTTP, TFTP, SNMP, FTP, SMTP, DNS
- 传输层：TCP, UDP
- 网络层：IP, ICMP, RIP
- 数据链路层：SLIP

## HTTP

### HTTP 状态码

RFC 规定 HTTP 的状态码为三位数，被氛围五类：

- `1xx`：提示信息，表示目前是协议处理的中间状态，还需后续的操作
- `2xx`：成功，报文已经收到并被正确处理
  - `200`「OK」：常见成功状态码，响应报文包含 body 数据
  - `204`「No Content」：与200 基本相同，但响应报文不包含 body 数据
  - `206`「Partial Content」：应用于 HTTP 分块下载或断点续传，表示响应返回的 body 数据是所有资源的一部分 
- `3xx`：重定向，资源位置发生变动，需要重新请求
  - `301`「Moved Permanently」：永久重定向，说明请求资源已不存在，需通过新 URL 访问
  - `302`「Found」：临时重定向，说明请求资源还在，暂时需要用另一个 URL 来访问
  - `304`「Not Modified」：不具有跳转含义，表示资源未修改，重定向到已存在的缓存文件，用于缓存控制
- `4xx`：客户端错误，请求报文有误，服务器无法处理
  - `400`「Bad Request」：表示客户端请求报文有误
  - `403`「Forbidden」：表示服务器禁止访问资源
  - `404`「Not Found」：表示请求的资源不存在或未找到
- `5xx`：服务器错误，服务器在处理请求时内部发生错误
  - `500`「Internal Server Error」：表示服务器发生错误
  - `501`「Not Implemented」：表示该客户端请求尚未支持
  - `502`「Bad Gateway」：表示服务器工作正常，访问后端服务发生了错误
  - `503`「Service Unavailable」：表示服务器繁忙，暂时无法响应

### GET 与 POST 的区别

- 请求参数：GET 请求参数通过 URL 传递，POST 请求参数放在 request body 中

- 请求缓存：GET 请求会被缓存，而 POST 请求不会
- 相对安全性：GET 请求参数会通过 URL 被浏览器缓存，容易被他人获取，而 POST 请求则不会
- 请求参数长度限制：GET 通过 URL 传参，浏览器会限制 URL 的长度
- 编码格式：GET 请求只能进行 URL 编码，而 POST 请求支持多种编码格式

### HTTP 与 HTTPS 的区别

- HTTP 属于明文传输，存在安全风险，HTTPS 加入 SSL/TLS 安全协议，对报文进行加密传输
- HTTP 在 TCP 三次握手后便可进行报文传输，而 HTTPS 在 TCP 三次握手后还需进行 SSL/TLS 握手过程，才可以进行报文传输
- HTTP 使用的端口号是 80，HTTPS 使用的端口号是 443
- HTTPS 协议需要向 CA 申请数字证书来保证身份是否可信

### HTTP/1.1、HTTP/2、HTTP/3 的演变

- HTTP/1.1
  - 使用 TCP 长连接，减少 TCP 性能开销
  - 支持管道网络传输，无需等待响应
- HTTP/2
  - 头部压缩，消除多个请求头的重复部分
  - 采用二进制格式传输
  - 通过数据流（Stream）传输，可指定数据流的优先级
  - 多路复用，允许一个链接并发处理多个请求或响应
  - 服务器推送，服务器可以主动向客户端发送消息
- HTTP/3
  - 把 HTTP 下层的 TCP 协议替换成 UDP，基于 QUIC 协议实现类似 TCP 的可靠传输

## TCP/IP

### TCP 三次握手

1. 客户端向服务器发起一个 SYN 报文，并包含自己的当前序列号 client_isn
2. 服务器发送一个的 SYN 报文作为响应，同时包含自己的当前序列号 server_isn 和数值为 client_isn + 1 的 ACK 序号
3. 客户端继续发送 ACK 数值为 server_isn + 1 的报文进行确认请求

### TCP 四次挥手

1. 客户端向服务器发起一个 FIN 报文，并包含自己的当前序列号 client_isn

2. 服务器发送 ACK 数值为 client_isn + 1 的报文作为响应，表明收到请求
3. 服务器发送一个 FIN 报文，并包含自己的当前序列号 server_isn，表明即将断开链接
4. 客户端继续发送 ACK 数值为 server_isn + 1 的报文进行确认

### TCP 与 UDP 的区别

- 连接性：TCP 是面向连接的传输协议，UDP 不需要连接即可传输数据
- 服务对象：TCP 属于一对一通讯，UDP 支持一对一、一对多、多对多通讯
- 可靠性：TCP 数据传输属于可靠传输，而 UDP 属于不可靠传输
- 传输方式：TCP 是流式传输，没有边界，UDP 是分包传输，有边界

## Web 安全

### XSS 跨站脚本攻击

- 防御策略
  - 字符转译
  - 启用 CSP 内容安全策略
  - 使用 HTTPOnly Cookie

### CSRF 跨站请求伪造攻击

- 防御策略
  - 同源检测机制
  - 使用 Samesite Cookie
  - 使用 JWT 验证